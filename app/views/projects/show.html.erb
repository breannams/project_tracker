
<h1> <%= @project.title %> by <%= @project.user.username %></h1>

<h2>Description: <%= @project.description %></h2>

<% if @project.collaboration %>
   <strong> This is a collaboration project! Please note that the original creator can edit or delete any entries that are added by other users. </strong>
    <%end %>

<% if @project.categories.any? %>
<h4><ul><% @project.categories.each do |category| %>
   <li> Category: <%= link_to(category.name, category) %> </li>
   
    <%end%></h4>
    </ul>
<%end%>

<h1>Entries: </h1>    


<% if @project.user == current_user || @project.collaboration %>

    <% if @project.entries.empty? %>
        <h2>There are no entries yet! create one <%=link_to "here", new_project_entry_path(@project)%> </h2>
        <%end%>

<h2><%= link_to "Add a new entry", new_project_entry_path(@project) %></h2>
    <% end %>
<ul>  
<% @project.entries.each do |entry| %>
    
    <li>
    <strong><%= entry.notes %></strong>
    </li>

    <% if entry.images.any? %>
    <h3>Attachments:</h3>
    <% entry.images.each do |file| %>
        <%= image_tag file %>
            <% if @project.user == current_user || entry.user == current_user %>
            <%= link_to "Remove image", delete_file_entry_url(file.id), method: :delete, data: {confirm: 'Are you sure?'} %>
        <% end %>
    <% end %>
    <% end %>

<br>
<ul>
    <li>Entry Created by: <%= entry.user.username %></li>
 
    <li>Created on: <%= entry.created_at.strftime("%m/%e/%Y %l:%M %p") %></li>
  
    <li>Last Updated on: <%= entry.updated_at.strftime("%m/%e/%Y %l:%M %p") %></li>
    <br>
  
    <% if current_user == entry.user || current_user == @project.user%>
    <%= link_to "Edit Entry", edit_entry_path(entry) %>
    <%= link_to "Delete Entry", entry, method: :delete, data: {confirm: 'Are you sure you want to delete this entry?'} %>
    <br>
    <br>
    <% end %></ul>
    
    
 <% end %>   
